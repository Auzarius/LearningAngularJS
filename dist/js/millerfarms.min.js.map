{"version":3,"sources":["MillerFarms.js"],"names":["StartVNC","vncpassword","document","getElementById","value","Settings","WriteString","result","msg","alert","getErrorMessage","Scales","e","StopVNC","InitPage","Channel","RemObjects","SDK","HTTPClientChannel","Message","JSONMessage","SettingsService","ScaleService","Database","DatabaseService","ReadString","setInterval","UpdateWeight","GetData","innerHTML","select","createElement","obj","JSON","parse","i","CUSTOMER","length","option","id","Oid","Name","appendChild","$","append","change","this","children","str","GetGross","gross","GetUnits","units","format","RestartDiade","Reboot","String","prototype","args","replace","regex","item","intVal","parseInt","substring","RegExp"],"mappings":"AASM,QAASA,YAEP,IAEE,GAAIC,GAAcC,SAASC,eAAe,eAAeC,KAEzDC,UAASC,YAAY,MAAO,WAAYL,EACtC,SAASM,KACT,SAASC,GAAOC,MAAMD,EAAIE,qBAG5BC,OAAOX,SAASC,EAAa,SAASM,GAAUE,MAAM,gBAAmB,SAASD,GAAOC,MAAMD,EAAIE,qBACnG,MAAOE,GACPH,MAAMG,IAIV,QAASC,WAEP,IAEEF,OAAOE,QAAQ,SAASN,GAAUE,MAAM,gBAAmB,SAASD,GAAOC,MAAMD,EAAIE,qBACrF,MAAOE,GACPH,MAAMG,IAIV,QAASE,YAEP,IAEEC,QAAU,GAAIC,YAAWC,IAAIC,kBAAkB,mCAC/CC,QAAU,GAAIH,YAAWC,IAAIG,YAC7Bf,SAAW,GAAIgB,iBAAgBN,QAASI,SACxCR,OAAS,GAAIW,cAAaP,QAASI,SACnCI,SAAW,GAAIC,iBAAgBT,QAASI,SAExCd,SAASoB,WAAW,MAAO,WAAY,MACrC,SAASlB,GAEPL,SAASC,eAAe,eAAeC,MAAQG,GAGjD,SAASC,GAAOC,MAAMD,EAAIE,qBAG5BgB,YAAYC,aAAc,KAGhCJ,SAASK,QAAQ,cAAe,2BAClC,SAASrB,GAERL,SAASC,eAAe,aAAa0B,UAAYtB,CAMjD,KAAK,GAJDuB,GAAS5B,SAAS6B,cAAc,UAEhCC,EAAMC,KAAKC,MAAM3B,GAEZ4B,EAAE,EAAGA,EAAIH,EAAII,SAASC,OAAQF,IACvC,CACC,GAAIG,GAASpC,SAAS6B,cAAc,SACpCO,GAAOC,GAAKP,EAAII,SAASD,GAAGK,IAC5BF,EAAOlC,MAAQ4B,EAAII,SAASD,GAAGK,IAC/BF,EAAOT,UAAYG,EAAII,SAASD,GAAGM,KACnCX,EAAOY,YAAYJ,GAGpBK,EAAG,mBAAoBC,OAAOd,GAE9Ba,EAAG,mBAAoBE,OAAO,WAC3B3C,SAASC,eAAe,aAAa0B,UAAYiB,KAAKC,SAAS,GAAG3C,SAKtE,SAASI,GAAOC,MAAMD,EAAIE,qBAElB,MAAOE,GACPH,MAAMG,IAyBV,QAASe,gBAEP,IAEE,GAAIqB,GAAM,SAEVrC,QAAOsC,SAAS,IAAK,SAAS1C,GAAU2C,MAAQ3C,GAAW,SAASC,GAAO0C,OAAgB,IAC3FvC,OAAOwC,SAAS,IAAK,SAAS5C,GAAU6C,MAAQ7C,GAAW,SAASC,GAAO4C,MAAQ,OAEnFlD,SAASC,eAAe,WAAW0B,UAAYmB,EAAIK,QAAQH,MAAOE,QAClE,MAAOxC,GACPH,MAAMG,IAIV,QAAS0C,gBAEP3C,OAAO4C,OAAO,SAAShD,GAAUE,MAAM,eAAkB,SAASD,GAAOC,MAAMD,EAAIE,qBAjIrF,GAAIK,SACAI,QACAR,OACAN,SACAkB,SAEA2B,MAAQ,EACRE,MAAQ,IAsFhBI,QAAOC,UAAUJ,OAAS,SAAUK,GACnC,GAAIV,GAAMF,IACV,OAAOE,GAAIW,QAAQH,OAAOC,UAAUJ,OAAOO,MAAO,SAASC,GAC1D,GACIF,GADAG,EAASC,SAASF,EAAKG,UAAU,EAAGH,EAAKxB,OAAS,GAWtD,OARCsB,GADGG,GAAU,EACHJ,EAAKI,GACM,KAAXA,EACA,IACW,KAAXA,EACA,IAEA,MAKbN,OAAOC,UAAUJ,OAAOO,MAAQ,GAAIK,QAAO,aAAc","file":"MillerFarms.min.js","sourcesContent":["      var Channel;\r\n      var Message;\r\n      var Scales;\r\n      var Settings;\r\n      var Database;\r\n\r\n      var gross = 0;\r\n      var units = \"lb\";\r\n\r\n      function StartVNC()\r\n      {\r\n        try\r\n        {\r\n          var vncpassword = document.getElementById('vncpassword').value;\r\n\r\n          Settings.WriteString('VNC', 'Password', vncpassword,\r\n            function(result) { },\r\n            function(msg) { alert(msg.getErrorMessage()); }\r\n          );\r\n\r\n          Scales.StartVNC(vncpassword, function(result) { alert(\"VNC Started\"); }, function(msg) { alert(msg.getErrorMessage()); });\r\n        } catch (e) {\r\n          alert(e);\r\n        }  \r\n      }\r\n\r\n      function StopVNC()\r\n      {\r\n        try\r\n        {\r\n          Scales.StopVNC(function(result) { alert(\"VNC Stopped\"); }, function(msg) { alert(msg.getErrorMessage()); });\r\n        } catch (e) {\r\n          alert(e);\r\n        }  \r\n      }\r\n\r\n      function InitPage()\r\n      {\r\n        try\r\n        {\r\n          Channel = new RemObjects.SDK.HTTPClientChannel(\"http://192.168.34.164:8095/JSON\");\r\n          Message = new RemObjects.SDK.JSONMessage();\r\n          Settings = new SettingsService(Channel, Message);\r\n          Scales = new ScaleService(Channel, Message);\r\n          Database = new DatabaseService(Channel, Message);\r\n\r\n          Settings.ReadString(\"VNC\", \"Password\", \"123\",\r\n            function(result) \r\n            {\r\n              document.getElementById('vncpassword').value = result; \r\n            },\r\n\r\n            function(msg) { alert(msg.getErrorMessage()); }\r\n          );\r\n\r\n          setInterval(UpdateWeight, 1000);\r\n\r\n    //Get Customer Data\r\n    Database.GetData(\"TruckIO.sdf\", \"SELECT * FROM [CUSTOMER]\",\r\n\t\tfunction(result) \r\n\t\t{\r\n\t\t\tdocument.getElementById('customers').innerHTML = result;\r\n\r\n\t\t\tvar select = document.createElement(\"select\");\r\n  \r\n\t\t\tvar obj = JSON.parse(result);\r\n\r\n\t\t\tfor (var i=0; i < obj.CUSTOMER.length; i++)\r\n\t\t\t{\r\n\t\t\t\tvar option = document.createElement(\"option\");\r\n\t\t\t\toption.id = obj.CUSTOMER[i].Oid;\r\n\t\t\t\toption.value = obj.CUSTOMER[i].Oid;\r\n\t\t\t\toption.innerHTML = obj.CUSTOMER[i].Name;\r\n\t\t\t\tselect.appendChild(option);\r\n\t\t\t}\r\n\r\n\t\t\t$( \"#customerselect\" ).append(select);\r\n\r\n\t\t\t$( \"#customerselect\" ).change(function() {\r\n  \t\t\t\tdocument.getElementById('customers').innerHTML = this.children[0].value;\r\n\t\t\t\t\r\n\t\t\t});\t\t\r\n\r\n\t\t},\r\n\t\tfunction(msg) { alert(msg.getErrorMessage()); }\r\n\t\t);\r\n        } catch (e) {\r\n          alert(e);\r\n        }  \r\n \r\n      }\r\n      \r\n                // This is the function.\r\n\t\tString.prototype.format = function (args) {\r\n\t\t\tvar str = this;\r\n\t\t\treturn str.replace(String.prototype.format.regex, function(item) {\r\n\t\t\t\tvar intVal = parseInt(item.substring(1, item.length - 1));\r\n\t\t\t\tvar replace;\r\n\t\t\t\tif (intVal >= 0) {\r\n\t\t\t\t\treplace = args[intVal];\r\n\t\t\t\t} else if (intVal === -1) {\r\n\t\t\t\t\treplace = \"{\";\r\n\t\t\t\t} else if (intVal === -2) {\r\n\t\t\t\t\treplace = \"}\";\r\n\t\t\t\t} else {\r\n\t\t\t\t\treplace = \"\";\r\n\t\t\t\t}\r\n\t\t\t\treturn replace;\r\n\t\t\t});\r\n\t\t};\r\n\t\tString.prototype.format.regex = new RegExp(\"{-?[0-9]+}\", \"g\");\r\n\r\n      function UpdateWeight()\r\n      {\r\n        try\r\n        {\r\n          var str = \"{0} {1}\";\r\n\r\n          Scales.GetGross(\"A\", function(result) { gross = result; }, function(msg) { gross = gross + 1; });\r\n          Scales.GetUnits(\"A\", function(result) { units = result; }, function(msg) { units = \"??\"; });\r\n\r\n          document.getElementById(\"scalewt\").innerHTML = str.format([gross, units]);\r\n        } catch (e) {\r\n          alert(e);\r\n        }  \r\n      }\r\n\r\n      function RestartDiade()\r\n      {\r\n        Scales.Reboot(function(result) { alert(\"Restarting\"); }, function(msg) { alert(msg.getErrorMessage()); });\r\n      }"],"sourceRoot":"/source/"}