var app=angular.module("FarmApp",[]);app.controller("DataController",["$scope",function(e){function t(){l=new RemObjects.SDK.HTTPClientChannel("http://scalesoftdevelopment.com:8095/JSON"),k=new RemObjects.SDK.JSONMessage,h=new DatabaseService(l,k),m=new ScaleService(l,k),Printer=new PrintService(l,k),h.GetData("MillerFarms.sdf","SELECT * FROM [Ticket] WHERE [Completed] = 0",function(t){e.OpenTickets=JSON.parse(t)},function(e){alert(e.getErrorMessage())}),h.GetData("MillerFarms.sdf","SELECT * FROM [Commodity]",function(t){e.Commodities=JSON.parse(t)},function(e){alert(e.getErrorMessage())}),h.GetData("MillerFarms.sdf","SELECT * FROM [Farm]",function(t){e.Farms=JSON.parse(t)},function(e){alert(e.getErrorMessage())}),h.GetData("MillerFarms.sdf","SELECT * FROM [Field]",function(t){e.Fields=JSON.parse(t)},function(e){alert(e.getErrorMessage())}),h.GetData("MillerFarms.sdf","SELECT * FROM [Truck]",function(t){e.Trucks=JSON.parse(t)},function(e){alert(e.getErrorMessage())})}function i(){try{e.CurrentWeight=3e4+20*S(0,250)}catch(t){alert(t)}}function n(){try{h.AppendUpdate("MillerFarms.sdf","DD2050_Farm_MillerFarms.BusinessObjects.Models.Ticket",JSON.stringify(new r),function(){d()},function(){})}catch(e){alert(e)}}function c(){this.Oid=a(),this.Farm=e.Ticket.Farm.Name,this.Field=e.Ticket.Field,this.Truck=e.Ticket.Truck.Name,this.IsActive=!0,this.Completed=!1,this.Splits=e.Ticket.Splits.toString(),this.Direction=e.Ticket.Direction,this.Commodity=e.Ticket.Commodity.Name,this.StandardMoisture=e.Ticket.Commodity.StandardMoisture,this.Inbound=e.Ticket.InWeight.toString(),this.InboundTimeDate=e.Ticket.InDate,angular.isUndefined(e.Ticket.Moisture)||(this.Moisture=e.Ticket.Moisture),angular.isUndefined(e.Ticket.TestWeight)||(this.TestWeight=e.Ticket.TestWeight)}function r(){this.Oid=e.Ticket.Oid,this.Farm=e.Ticket.Farm,this.Field=e.Ticket.Field,this.Truck=e.Ticket.Truck,this.Splits=e.Ticket.Splits.toString(),this.Direction=e.Ticket.Direction,this.Commodity=e.Ticket.Commodity,this.StandardMoisture=e.Ticket.StandardMoisture,this.Inbound=e.Ticket.InWeight.toString(),this.InboundTimeDate=e.Ticket.InboundTimeDate,this.IsActive=!0,this.Completed=!0,this.OutboundTimeDate=e.Ticket.OutDate,this.Outbound=e.Ticket.OutWeight.toString(),this.Moisture=e.Ticket.Moisture,this.TestWeight=e.Ticket.TestWeight,this.TicketNumber=e.Ticket.TicketNumber.toString()}function s(){try{var e=new c;h.AppendUpdate("MillerFarms.sdf","DD2050_Farm_MillerFarms.BusinessObjects.Models.Ticket",JSON.stringify(e),function(){},function(){})}catch(t){alert(t)}}function a(){function e(e){var t=(Math.random().toString(16)+"000000000").substr(2,8);return e?"-"+t.substr(0,4)+"-"+t.substr(4,4):t}return e()+e(!0)+e(!0)+e()}function o(){setTimeout(function(){e.mode="home",this.location.reload()},2e3)}function u(){var t="";t="CORN"===e.Ticket.Commodity||"WHEAT"===e.Ticket.Commodity||"SOYBEAN"===e.Ticket.Commodity?"Inbound"===e.Ticket.Direction?"SELECT * FROM [Sequencer] WHERE [SeqName] = 'InboundCommodity'":"SELECT * FROM [Sequencer] WHERE [SeqName] = 'OutboundCommodity'":"SELECT * FROM [Sequencer] WHERE [SeqName] = 'Other'",h.GetData("MillerFarms.sdf",t,function(t){e.Sequences=JSON.parse(t),e.Sequence=e.Sequences[0];e.Sequence.SeqNumber;e.Ticket.TicketNumber=e.Sequence.SeqNumber+1,n(),T()},function(e){alert("Failed To Set Ticket Number")})}function T(){var t=new Array,i=new Array,n=new Parameter;n.Name="Oid",n.DataType="System.Guid",n.Value=e.Sequence.Oid,t.push(n),n=new Parameter,n.Name="SeqNumber",n.DataType="System.Int32",n.Value=e.Ticket.TicketNumber.toString(),i.push(n),h.UpdateRecords("MillerFarms.sdf","Sequencer",i,t,function(e){},function(e){})}function d(){try{var t=new Array,i=new Parameter;i.Name="Oid",i.DataType="System.Guid",i.Value=e.Ticket.Oid,t.push(i),Printer.PrintBusinessObject("MillerFarms.sdf","DD2050_Farm_MillerFarms.BusinessObjects.Models.Ticket",t,"\\NAND_Flash\\Extern\\TicketFormats\\OutboundFromWeb.txt",function(e){alert(e)},function(){})}catch(n){alert(n.Message)}}var l,k,m,h;t(),e.Mode="home",e.Message="",e.CurrentWeight=0,e.Directions=["Inbound","Outbound"];var S=function(e,t){return Math.floor(Math.random()*(t-e+1)+e)};e.cancelClick=function(){e.Ticket=new Object,e.selectedOpenTicket=new Object,e.Mode="home"},e.newTicketClick=function(){e.Ticket=new Object,e.Mode="inbound",i()},e.inboundClick=function(t){t&&(e.Ticket.Splits1=100,e.Mode="fields",i())},e.fieldformClick=function(t){t&&(i(),e.Ticket.InWeight=e.CurrentWeight,e.Ticket.Completed=!1,e.Ticket.InDate=(new Date).toUTCString(),e.Ticket.Field=e.Ticket.Field1.Name,e.Ticket.Splits=e.Ticket.Splits1,angular.isUndefined(e.Ticket.Field2)||(e.Ticket.Field=e.Ticket.Field+"|"+e.Ticket.Field2.Name),angular.isUndefined(e.Ticket.Field3)||(e.Ticket.Field=e.Ticket.Field+"|"+e.Ticket.Field3.Name),angular.isUndefined(e.Ticket.Splits2)||(e.Ticket.Splits=e.Ticket.Splits+"|"+e.Ticket.Splits2),angular.isUndefined(e.Ticket.Splits3)||(e.Ticket.Splits=e.Ticket.Splits+"|"+e.Ticket.Splits3),e.Mode="confirminbound")},e.outboundClick=function(t){i(),t&&(e.Ticket.OutWeight=parseInt(5e4+20*S(0,250)),e.Ticket.InWeight=parseInt(3e4+20*S(0,250)),e.Ticket.InWeight>e.Ticket.OutWeight?(e.Ticket.Gross=e.Ticket.InWeight,e.Ticket.Tare=e.Ticket.OutWeight):(e.Ticket.Gross=e.Ticket.OutWeight,e.Ticket.Tare=e.Ticket.InWeight),e.Ticket.Net=e.Ticket.Gross-e.Ticket.Tare,e.Mode="confirmoutbound",e.Ticket.OutDate=(new Date).toUTCString(),e.Ticket.Completed=!0)},e.saveInboundClick=function(){e.Ticket.InWeight=3e4+S(0,250),s(),e.Message="Please Proceed To Loading/Unloading",e.Mode="thanks",o()},e.Nap=function(e){for(var t=(new Date).getTime();(new DateTime).getTime()<t+e;);},e.saveOutboundClick=function(){u(),e.Message="Ticket Saved",e.Mode="thanks",o()},e.LoadTicket=function(){i(),e.Ticket=e.selectedOpenTicket,e.Mode="outbound"},e.thanksClick=function(){},e.GetGrossWeight=function(){e.CurrentWeight=5e4+S(0,250)}}]);
//# sourceMappingURL=mf.min.js.map
