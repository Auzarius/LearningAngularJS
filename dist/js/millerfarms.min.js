var app=angular.module("FarmApp",[]);app.controller("DataController",["$scope",function(e){function t(){u=new RemObjects.SDK.HTTPClientChannel("http://scalesoftdevelopment.com:8095/JSON"),o=new RemObjects.SDK.JSONMessage,T=new DatabaseService(u,o),s=new ScaleService(u,o),T.GetData("TruckIO.sdf","SELECT * FROM [Ticket] WHERE [Completed] = 0",function(t){e.OpenTickets=JSON.parse(t)},function(e){alert(e.getErrorMessage())}),T.GetData("TruckIO.sdf","SELECT * FROM [Commodity]",function(t){e.Commodities=JSON.parse(t)},function(e){alert(e.getErrorMessage())}),T.GetData("TruckIO.sdf","SELECT * FROM [Farm]",function(t){e.Farms=JSON.parse(t)},function(e){alert(e.getErrorMessage())}),T.GetData("TruckIO.sdf","SELECT * FROM [Field]",function(t){e.Fields=JSON.parse(t)},function(e){alert(e.getErrorMessage())}),T.GetData("TruckIO.sdf","SELECT * FROM [Truck]",function(t){e.Trucks=JSON.parse(t)},function(e){alert(e.getErrorMessage())})}function i(){try{s.GetGross("A",function(e){l=e},function(e){l=-1}),e.CurrentWeight=l}catch(t){alert(t)}}function a(){try{var t=new Array,i=new Array,a=new Parameter;a.Name="Oid",a.DataType="System.Guid",a.Value=e.Ticket.Oid,t.push(a),a=new Parameter,a.Name="OutboundTimeDate",a.DataType="System.DateTime",a.Value=e.Ticket.OutDate,i.push(a),a=new Parameter,a.Name="Completed",a.DataType="System.Boolean",a.Value="true",i.push(a),a=new Parameter,a.Name="Outbound",a.DataType="System.Double",a.Value=e.Ticket.OutWeight.toString(),i.push(a),a=new Parameter,a.Name="Moisture",a.DataType="System.Double",a.Value=e.Ticket.Moisture,i.push(a),a=new Parameter,a.Name="TestWeight",a.DataType="System.Double",a.Value=e.Ticket.TestWeight,i.push(a),T.UpdateRecords("TruckIO.sdf","Ticket",i,t,function(e){e.toObject()},function(e){alert("Fail")})}catch(n){alert(n)}}function n(){try{var t=new Array,i=new Parameter;i.Name="Oid",i.DataType="System.Guid",i.Value=r(),t.push(i),i=new Parameter,i.Name="Completed",i.DataType="System.Boolean",i.Value="false",t.push(i),i=new Parameter,i.Name="Truck",i.DataType="System.String",i.Value=e.Ticket.Truck.Name,t.push(i),i=new Parameter,i.Name="Farm",i.DataType="System.String",i.Value=e.Ticket.Farm.Name,t.push(i),i=new Parameter,i.Name="Field",i.DataType="System.String",i.Value=e.Ticket.Field,t.push(i),i=new Parameter,i.Name="Splits",i.DataType="System.String",i.Value=e.Ticket.Splits,t.push(i),i=new Parameter,i.Name="Direction",i.DataType="System.String",i.Value=e.Ticket.Direction,t.push(i),i=new Parameter,i.Name="Commodity",i.DataType="System.String",i.Value=e.Ticket.Commodity.Name,t.push(i),i=new Parameter,i.Name="Inbound",i.DataType="System.Double",i.Value=e.Ticket.InWeight.toString(),t.push(i),i=new Parameter,i.Name="InboundTimeDate",i.DataType="System.DateTime",i.Value=e.Ticket.InDate,t.push(i),angular.isUndefined(e.Ticket.Moisture)||(i=new Parameter,i.Name="Moisture",i.DataType="System.Double",i.Value=e.Ticket.Moisture,t.push(i)),angular.isUndefined(e.Ticket.TestWeight)||(i=new Parameter,i.Name="TestWeight",i.DataType="System.Double",i.Value=e.Ticket.TestWeight,t.push(i)),T.AppendRecord("TruckIO.sdf","Ticket",t,function(e){e.toObject()},function(e){alert("Fail")})}catch(a){alert(a)}}function r(){function e(e){var t=(Math.random().toString(16)+"000000000").substr(2,8);return e?"-"+t.substr(0,4)+"-"+t.substr(4,4):t}return e()+e(!0)+e(!0)+e()}function c(){setTimeout(function(){e.mode="home",this.location.reload()},2e3)}var u,o,s,T,l=0;t(),e.Mode="home",e.Message="",e.CurrentWeight=0,e.Directions=["Inbound","Outbound"],e.cancelClick=function(){e.Ticket=[],e.selectedOpenTicket=[],e.Mode="home"},e.newTicketClick=function(){e.Ticket=[],e.Mode="inbound",i()},e.inboundClick=function(t){t&&(e.Ticket.Splits1=100,e.Mode="fields",i())},e.fieldformClick=function(t){t&&(i(),e.Ticket.InWeight=e.CurrentWeight,e.Ticket.Completed=!1,e.Ticket.InDate=(new Date).toLocaleDateString(),e.Ticket.Field=e.Ticket.Field1.Name,e.Ticket.Splits=e.Ticket.Splits1,angular.isUndefined(e.Ticket.Field2)||(e.Ticket.Field=e.Ticket.Field+"|"+e.Ticket.Field2.Name),angular.isUndefined(e.Ticket.Field3)||(e.Ticket.Field=e.Ticket.Field+"|"+e.Ticket.Field3.Name),angular.isUndefined(e.Ticket.Splits2)||(e.Ticket.Splits=e.Ticket.Splits+"|"+e.Ticket.Splits2),angular.isUndefined(e.Ticket.Splits3)||(e.Ticket.Splits=e.Ticket.Splits+"|"+e.Ticket.Splits3),e.Mode="confirminbound")},e.outboundClick=function(t){i(),t&&(e.Ticket.OutWeight=e.CurrentWeight,e.Ticket.InWeight=e.Ticket.Inbound,e.Ticket.InWeight>e.Ticket.OutWeight?(e.Ticket.Gross=e.Ticket.InWeight,e.Ticket.Tare=e.Ticket.OutWeight):(e.Ticket.Gross=e.Ticket.OutWeight,e.Ticket.Tare=e.Ticket.InWeight),e.Ticket.Net=e.Ticket.Gross-e.Ticket.Tare,e.Mode="confirmoutbound",e.Ticket.OutDate=(new Date).toLocaleDateString(),e.Ticket.Completed=!0)},e.saveInboundClick=function(){e.Ticket.InWeight=e.CurrentWeight,n(),e.Message="Please Proceed To Loading/Unloading",e.Mode="thanks",c()},e.Nap=function(e){for(var t=(new Date).getTime();(new DateTime).getTime()<t+e;);},e.saveOutboundClick=function(){a(),e.Message="Ticket Saved",e.Mode="thanks",c()},e.LoadTicket=function(){i(),e.Ticket=e.selectedOpenTicket,e.Mode="outbound"},e.thanksClick=function(){},e.GetGrossWeight=function(){s.GetGross("A",function(t){e.CurrentWeight=t},function(e){l=0})}}]);
//# sourceMappingURL=millerfarms.min.js.map
